<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Purchase iPhone</title>

  
  <style>
    /* Basic Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f7f7f7;
      color: #333;
      line-height: 1.6;
    }
    a {
      color: #0071e3;
      text-decoration: none;
    }
    a:hover {
      color: #005bb5;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
    }
    /* Header */
    header {
      background-color: #000;
      color: #fff;
    }
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
    }
    .logo {
      font-size: 24px;
      font-weight: bold;
    }
    nav a {
      margin-left: 20px;
      font-size: 16px;
    }
    .btn-logout {
      background-color: #e63946;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 20px;
      font-size: 16px;
    }
    .btn-logout:hover {
      background-color: #b8323a;
    }
    /* Main content */
    main {
      padding: 40px 0;
      text-align: center;
    }
    .purchase-info {
      background-color: #fff;
      padding: 30px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      max-width: 500px;
      margin: 20px auto 40px auto;
      font-size: 18px;
      color: #111;
    }
    .product-image {
      max-width: 300px;
      width: 100%;
      height: auto;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      margin: 0 auto 20px auto;
      display: block;
    }
    .logged-in {
      color: #28a745;
      margin-bottom: 20px;
      text-align: center;
    }
    .not-logged-in {
      color: #dc3545;
      margin-bottom: 20px;
      text-align: center;
    }
    .btn-primary {
      display: block;
      margin: 20px auto 0 auto;
      padding: 12px 30px;
      font-size: 18px;
      background-color: #0071e3;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .btn-primary:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    .btn-primary:hover:not(:disabled) {
      background-color: #005bb5;
    }
    /* Footer */
    footer {
      background-color: #1c1c1e;
      color: #8e8e93;
      text-align: center;
      padding: 20px 0;
      margin-top: 40px;
    }
  </style>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Purchase iPhone</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="purchase-page">

<header>
  <div class="container nav-container">
    <h1 class="logo">iPhone Store</h1>
    <nav id="navLinks">
      <!-- Links will be injected here -->
    </nav>
  </div>
</header>

<main class="container purchase-info">
  <h2 id="purchaseTitle">Buy iPhone</h2>
  <img id="modelImage" src="" alt="Phone Image" style="max-width: 250px; margin: 20px auto; display: block; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);" />
  <p id="details">Loading...</p>
  <div id="loginCheck"></div>
  <button id="btnPurchase" class="btn-primary" disabled>Purchase</button>
</main>

<footer>
  <div class="container footer-container">
    <p>&copy; 2025 iPhone Store</p>
  </div>
</footer>

<script>
  const productPrices = {
    'iPhone 12': 39900,
    'iPhone 12 mini': 34900,
    'iPhone 12 Pro': 52900,
    'iPhone 12 Pro Max': 59900,
    'iPhone 13': 45900,
    'iPhone 13 mini': 39900,
    'iPhone 13 Pro': 59900,
    'iPhone 13 Pro Max': 67900,
    'iPhone 14': 52900,
    'iPhone 14 Plus': 59900,
    'iPhone 14 Pro': 69900,
    'iPhone 14 Pro Max': 79900,
    'iPhone 15': 56990,
    'iPhone 15 Plus': 63990,
    'iPhone 15 Pro': 70990,
    'iPhone 15 Pro Max': 84990,
  };

  // Map models to images - update with your correct paths & filenames (jpg)
  const productImages = {
    'iPhone 12': 'images/iphone12.jpg',
    'iPhone 12 mini': 'images/iphone12-mini.jpg',
    'iPhone 12 Pro': 'images/iphone12-pro.jpg',
    'iPhone 12 Pro Max': 'images/iphone12-pro-max.jpg',
    'iPhone 13': 'images/iphone13.jpg',
    'iPhone 13 mini': 'images/iphone13-mini.jpg',
    'iPhone 13 Pro': 'images/iphone13-pro.jpg',
    'iPhone 13 Pro Max': 'images/iphone13-pro-max.jpg',
    'iPhone 14': 'images/iphone14.jpg',
    'iPhone 14 Plus': 'images/iphone14-plus.jpg',
    'iPhone 14 Pro': 'images/iphone14-pro.jpg',
    'iPhone 14 Pro Max': 'images/iphone14-pro-max.jpg',
    'iPhone 15': 'images/iphone15.jpg',
    'iPhone 15 Plus': 'images/iphone15-plus.jpg',
    'iPhone 15 Pro': 'images/iphone15-pro.jpg',
    'iPhone 15 Pro Max': 'images/iphone15-pro-max.jpg',
  };

  function updateNav(user) {
    const nav = document.getElementById('navLinks');
    nav.innerHTML = '';

    // Home link always
    const homeLink = document.createElement('a');
    homeLink.href = 'index.html';
    homeLink.textContent = 'Home';
    nav.appendChild(homeLink);

  

    if (user) {
      // Welcome and Logout
      const welcome = document.createElement('span');
      welcome.style.color = '#fff';
      welcome.style.marginLeft = '15px';
      welcome.textContent = `Welcome, ${user}`;
      nav.appendChild(welcome);

      const logoutBtn = document.createElement('button');
      logoutBtn.textContent = 'Logout';
      logoutBtn.className = 'btn-logout';
      logoutBtn.style.marginLeft = '15px';
      logoutBtn.addEventListener('click', () => {
        localStorage.removeItem('user');
        location.reload();
      });
      nav.appendChild(logoutBtn);
    } else {
      // Show Login and Sign Up
      const loginLink = document.createElement('a');
      loginLink.href = 'login.html';
      loginLink.textContent = 'Login';
      nav.appendChild(loginLink);

      const signupLink = document.createElement('a');
      signupLink.href = 'signup.html';
      signupLink.textContent = 'Sign Up';
      signupLink.className = 'btn-signup';
      signupLink.style.marginLeft = '10px';
      nav.appendChild(signupLink);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const model = urlParams.get('model');
    const price = productPrices[model] || 0;
    const user = localStorage.getItem('user');

    updateNav(user);

    // Show purchase info
    document.getElementById('purchaseTitle').textContent = `Buy ${model}`;
    document.getElementById('details').textContent = `You selected: ${model}. Price: ₱${price.toLocaleString()}`;

    // Show image
    const modelImage = document.getElementById('modelImage');
    if (productImages[model]) {
      modelImage.src = productImages[model];
      modelImage.alt = model;
    } else {
      modelImage.style.display = 'none';
    }

    const loginCheck = document.getElementById('loginCheck');
    const btnPurchase = document.getElementById('btnPurchase');

    if (user) {
      loginCheck.innerHTML = `<p class="logged-in">Logged in as <strong>${user}</strong></p>`;
      btnPurchase.disabled = false;
    } else {
      loginCheck.innerHTML = `<p class="not-logged-in">Please <a href="login.html">login</a> to purchase.</p>`;
      btnPurchase.disabled = true;
    }

    btnPurchase.addEventListener('click', () => {
      if (!user) {
        alert('You must login first.');
        window.location.href = 'login.html';
        return;
      }
      const date = new Date();
      const receipt = `
=== RECEIPT ===
Date: ${date.toLocaleString()}
User: ${user}
Model: ${model}
Price: ₱${price.toLocaleString()}

Thank you for your purchase!
`;
      alert(receipt);
    });
  });
</script>

</body>
</html>
